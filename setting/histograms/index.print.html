<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.132.1">
    <meta name="generator" content="Relearn 6.1.1">
    <meta name="description" content="last modified: 2023-11-14 by Kodai Okawa In the online analysis, it is important to have immediate access to data.">
    <meta name="author" content="Kodai Okawa">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Histograms :: CRIB artemis">
    <meta name="twitter:description" content="last modified: 2023-11-14 by Kodai Okawa In the online analysis, it is important to have immediate access to data.">
    <meta property="og:url" content="https://okawak.github.io/artemis_crib/setting/histograms/index.html">
    <meta property="og:site_name" content="CRIB artemis">
    <meta property="og:title" content="Histograms :: CRIB artemis">
    <meta property="og:description" content="last modified: 2023-11-14 by Kodai Okawa In the online analysis, it is important to have immediate access to data.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Setting">
    <meta property="article:published_time" content="2023-11-02T17:03:45+09:00">
    <meta property="article:modified_time" content="2023-11-14T19:00:32+09:00">
    <meta itemprop="name" content="Histograms :: CRIB artemis">
    <meta itemprop="description" content="last modified: 2023-11-14 by Kodai Okawa In the online analysis, it is important to have immediate access to data.">
    <meta itemprop="datePublished" content="2023-11-02T17:03:45+09:00">
    <meta itemprop="dateModified" content="2023-11-14T19:00:32+09:00">
    <meta itemprop="wordCount" content="1060">
    <title>Histograms :: CRIB artemis</title>
    <link href="https://okawak.github.io/artemis_crib/setting/histograms/index.html" rel="canonical" type="text/html" title="Histograms :: CRIB artemis">
    <link href="/artemis_crib/setting/histograms/index.xml" rel="alternate" type="application/rss+xml" title="Histograms :: CRIB artemis"><link rel="icon" href="/artemis_crib/images/crib_overlay.png" type="image/png">

    <link href="/artemis_crib/css/fontawesome-all.min.css?1723881510" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fontawesome-all.min.css?1723881510" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/nucleus.css?1723881510" rel="stylesheet">
    <link href="/artemis_crib/css/auto-complete.css?1723881510" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/auto-complete.css?1723881510" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/perfect-scrollbar.min.css?1723881510" rel="stylesheet">
    <link href="/artemis_crib/css/fonts.css?1723881510" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fonts.css?1723881510" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/theme.css?1723881510" rel="stylesheet">
    <link href="/artemis_crib/css/theme-CRIB-theme.css?1723881510" rel="stylesheet" id="R-variant-style">
    <link href="/artemis_crib/css/chroma-relearn-dark.css?1723881510" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/artemis_crib/css/variant.css?1723881510" rel="stylesheet">
    <link href="/artemis_crib/css/print.css?1723881510" rel="stylesheet" media="print">
    <link href="/artemis_crib/css/format-print.css?1723881510" rel="stylesheet">
    <script src="/artemis_crib/js/variant.js?1723881510"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/okawak.github.io\/artemis_crib';
      window.index_js_url="/artemis_crib/index.search.js?1723881510";
      // variant stuff
      window.variants && variants.init( [ 'CRIB-theme', 'zen-dark', 'learn', 'relearn-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
 

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-MZF67K577Y"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-MZF67K577Y");
</script>
 

  </head>
  <body class="mobile-support print" data-url="/artemis_crib/setting/histograms/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/setting/index.html"><span itemprop="name">Setting</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Histograms</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/setting/steering/index.html" title="Steering (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/setting/vncserver/index.html" title="VNC server (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="histograms">Histograms</h1>

<span class="badge cstyle default"><span class="badge-content">last modified: 2023-11-14 by Kodai Okawa</span></span>
<p>In the online analysis, it is important to have immediate access to data.
The artemis can produce <strong>TTree</strong> object but long commands are needed to access, for example,</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">artemis <span class="o">[</span>1<span class="o">]</span> fcd <span class="m">0</span>  <span class="c1"># move to the created rootfile</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>2<span class="o">]</span> zone <span class="m">2</span> <span class="m">2</span>  <span class="c1"># make a &#34;artemis&#34; 2x2 canvas</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>3<span class="o">]</span> tree-&gt;Draw<span class="o">(</span><span class="s2">&#34;ssd_cal.fCharge:ssd_cal.fTiming&gt;(100,0.,100., 100,0.,100)&#34;</span>,<span class="s2">&#34;ssd_cal.fCharge &gt; 1.0&#34;</span>,<span class="s2">&#34;colz&#34;</span><span class="o">)</span></span></span></code></pre></div><p>This would take time if there are some histograms that you want to display immediately&hellip;</p>
<p>Therefore, if you know in advance the diagram you want to see, it is useful to predefine its histogram!
The processor used is <code>TTreeProjectionProcessor</code>.
I would like to explain how to use this one.</p>
<h2 id="1-steering-file">1. Steering file</h2>
<p>Let&rsquo;s look at how histograms are defined when looking at SSD data.
First, let&rsquo;s prepare the steering file as follows!
please see previous section for omissions.</p>

<div class="tab-panel" data-tab-group="727061842276f2b1007b6d22d42c3507">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="chkssdyaml"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('727061842276f2b1007b6d22d42c3507','chkssdyaml')"
    >
      <span class="tab-nav-text">chkssd.yaml</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="chkssdyaml"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># -- snip --</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="l">ssd/ssd_single.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Histogram</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">projection_ssd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">art::TTreeProjectionProcessor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parameter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line hl"><span class="cl"><span class="w">      </span><span class="nt">FileName</span><span class="p">:</span><span class="w"> </span><span class="l">hist/ssd/ssd.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Type</span><span class="p">:</span><span class="w">     </span><span class="l">art::TTreeProjection</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">OutputFilename</span><span class="p">:</span><span class="w"> </span><span class="cp">*histout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># output root file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">outputtree</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">art::TOutputTreeProcessor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parameter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">FileName</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="cp">*output</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>The histogram is created based on the <strong>TTree</strong> object,
so describe the processing of the histogram after the part that represents the data processing and before the part that outputs the TTree (<code>TOutputTreeProcessor</code>).</p>
<p>There are three points to note here.</p>
<ol>
<li>It is possible to create a root file containing only a histogram as well as a root file containing a TTree.
(Look at the node part of the OutputFilename.)</li>
<li>The histogram itself is defined in a separate file to this one, written on the highlighted line above.</li>
<li>The file paths are relative to the working directory.</li>
</ol>
<p>Therefore, I would now like to show the histogram definition file.</p>
<h2 id="2-histogram-file">2. Histogram file</h2>
<p>First please look at this example.</p>

<div class="tab-panel" data-tab-group="a7c737ed5c420dd5bee7da8e4e6d4b5e">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="histssdssdyaml"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('a7c737ed5c420dd5bee7da8e4e6d4b5e','histssdssdyaml')"
    >
      <span class="tab-nav-text">hist/ssd/ssd.yaml</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="histssdssdyaml"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="nt">anchor</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="w">  </span>- <span class="cp">&amp;energy</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;ssd_cal.fCharge&#34;</span><span class="p">,</span><span class="m">100</span><span class="p">,</span><span class="m">0</span><span class="l">.,100.]</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="w">  </span>- <span class="cp">&amp;timing</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;ssd_cal.fTiming&#34;</span><span class="p">,</span><span class="m">100</span><span class="p">,</span><span class="m">0</span><span class="l">.,100.]</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="w"></span><span class="nt">alias</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="w">  </span><span class="nt">energy_cut</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_cal.fCharge&gt;1.0;</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="w"></span><span class="nt">group</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_test</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_test</span><span class="w">
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="w">    </span><span class="nt">contents</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy</span><span class="w">
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy</span><span class="w">
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="w">        </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="cp">*energy</span><span class="w">
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_timing</span><span class="w">
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_timing</span><span class="w">
</span></span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="w">        </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="cp">*timing</span><span class="w">
</span></span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy and timing</span><span class="w">
</span></span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy and timing</span><span class="w">
</span></span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="w">        </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="cp">*timing</span><span class="w">
</span></span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="w">        </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="cp">*energy</span><span class="w">
</span></span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="w">        </span><span class="nt">cut</span><span class="p">:</span><span class="w"> </span><span class="l">energy_cut</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>This definition file consists of three parts.</p>
<h3 id="21-anchor">2.1 anchor</h3>
<p>The actual core part is the &ldquo;<strong>2.3 group</strong>&rdquo;, but &ldquo;<strong>2.1 anchor</strong>&rdquo; and &ldquo;<strong>2.2 alias</strong>&rdquo; are often used to make this part easier to write.
The anchor defines the first argument of <code>tree-&gt;Draw(&quot;ssd_cal.fCharge&gt;(100,0.,100.)&quot;,&quot;ssd_cal.fCharge &gt; 1.0&quot;)</code></p>
<p>The array stored in the variable named &ldquo;energy&rdquo; in the second line looks like <code>[str, int, float, float]</code> and has the following meanings</p>
<ol>
<li>str: Name of the object (need double quote &ldquo;&rdquo;)</li>
<li>int: Number of bins of histogram</li>
<li>float: Minimum value of histogram range</li>
<li>float: Maximum value of histogram range</li>
</ol>
<p>As you might imagine, inside the first argument you can also add operations such as <code>TMath::Sqrt(ssd_cal.fCharge)</code> or <code>ssd_cal.fCharge-ssd_cal.fTiming</code>, because it is the same with &ldquo;tree-&gt;Draw&rdquo;.</p>
<p>Note, however, that the definition here is for one-dimensional histograms.
Two-dimensional histograms will be presented in Section 2.3. It is very simple to write!</p>
<h3 id="22-alias">2.2 alias</h3>
<p>This part is used when applying gates to events (often we call it as &ldquo;cut&rdquo; or &ldquo;selection&rdquo;).
For example, if you only want to see events with energies above 1.0 MeV, you would write something like <code>tree-&gt;Draw(&quot;energy&quot;,&quot;energy&gt;1.0&quot;)</code>.</p>
<p>The alias node is used to define the part of <code>energy&gt;1.0</code></p>

<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Note</div>
  <div class="box-content">

<p>A semicolon &ldquo;;&rdquo; at the end of the sentence may be needed&hellip;?
please check <a href="https://github.com/artemis-dev/artemis/blob/develop/sources/loop/hist/TTreeProjection.cc" rel="external" target="_blank">the source</a>.</p>
</div>
</div>
<h3 id="23-group">2.3 group</h3>
<p>The histogram is defined here and the object is stored in a directory in artemis (ROOT, TDirectory).
In the example shown above, the directory structure would look like this:</p>
<p>(It is not actually displayed in this way).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># in artemis</span>
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">└── ssd_test
</span></span><span class="line"><span class="cl">    ├── ssd_energy <span class="o">(</span>1D hist<span class="o">)</span>
</span></span><span class="line"><span class="cl">    ├── ssd_timing <span class="o">(</span>1D hist<span class="o">)</span>
</span></span><span class="line"><span class="cl">    └── ssd_energy and timing <span class="o">(</span>2D hist<span class="o">)</span></span></span></code></pre></div><p>The first &ldquo;name&rdquo; and &ldquo;title&rdquo; nodes are arguments of TDirectory instance.
Also the second &ldquo;name&rdquo; and &ldquo;title&rdquo; nodes are arguments of instance of TH1 or TH2 object.
The other &ldquo;x&rdquo;, &ldquo;y&rdquo; and &ldquo;cut&rdquo; is the important node!</p>
<ol>
<li>If there are only &ldquo;x&rdquo; nodes -&gt; 1D histogram</li>
<li>If there are both &ldquo;x&rdquo; and &ldquo;y&rdquo; nodes -&gt; 2D histogram</li>
<li>In any case, it can be gated by adding a &ldquo;cut&rdquo; node.</li>
</ol>
<h2 id="3-commands-for-histograms">3. Commands for histograms</h2>
<p>There are many useful command for checking the histogram objects.
These are similar to the <a href="https://ribf.riken.go.jp/RIBFDAQ/index.php?Tools/Analysis/ANAPAW" rel="external" target="_blank">ANAPAW</a> commands.</p>
<ol>
<li>ls : check the artemis directory</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&gt; artlogin <span class="o">(</span>username<span class="o">)</span>
</span></span><span class="line"><span class="cl">&gt; a
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>0<span class="o">]</span> add steering/chkssd.yaml <span class="nv">NAME</span><span class="o">=</span>hoge <span class="nv">NUM</span><span class="o">=</span><span class="m">0000</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>1<span class="o">]</span> res
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>2<span class="o">]</span> sus
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>3<span class="o">]</span> ls <span class="c1"># check the artemis directory</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> artemis
</span></span><span class="line"><span class="cl">&gt;   <span class="m">0</span> art::TTreeProjGroup ssd_test        ssd_test
</span></span><span class="line"><span class="cl">    <span class="m">1</span> art::TAnalysisInfo analysisInfo</span></span></code></pre></div><ol start="2">
<li>cd [ID] : move to the directory of the ID</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">artemis <span class="o">[</span>4<span class="o">]</span> <span class="nb">cd</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>5<span class="o">]</span> ls
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> ssd_test
</span></span><span class="line"><span class="cl">&gt;   <span class="m">0</span> art::TH1FTreeProj ssd_energy      ssd_energy
</span></span><span class="line"><span class="cl">    <span class="m">1</span> art::TH1FTreeProj ssd_timing      ssd_timing
</span></span><span class="line"><span class="cl">    <span class="m">2</span> art::TH2FTreeProj ssd_energy and timing ssd_energy and timing</span></span></code></pre></div><ol start="3">
<li>ht [ID] [option] : draw the histogram of the ID</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">artemis <span class="o">[</span>6<span class="o">]</span> ht <span class="m">0</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>7<span class="o">]</span> ht <span class="m">2</span> colz</span></span></code></pre></div><ol start="4">
<li>hn : draw the next ID histogram</li>
<li>hb : draw the prev ID histogram</li>
</ol>
<h2 id="4-template-hist-file">4. Template hist file</h2>
<p>When setting up several detectors of the same type and wanting to set up a histogram with the same content, it is tedious to create several files with only the names of the objects changed.
In such cases, it is useful to allow the histogram definition file to have arguments.</p>
<p>Please look here first.</p>

<div class="tab-panel" data-tab-group="bdd5ddebbb50000f646c5ca4f7f93afc">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="chkssdyaml"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('bdd5ddebbb50000f646c5ca4f7f93afc','chkssdyaml')"
    >
      <span class="tab-nav-text">chkssd.yaml</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="chkssdyaml"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># -- snip --</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="l">ssd/ssd_single.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Histogram</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">projection_ssd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">art::TTreeProjectionProcessor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parameter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">FileName</span><span class="p">:</span><span class="w"> </span><span class="l">hist/ssd/ssd.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Type</span><span class="p">:</span><span class="w">     </span><span class="l">art::TTreeProjection</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">OutputFilename</span><span class="p">:</span><span class="w"> </span><span class="cp">*histout</span><span class="w">
</span></span></span><span class="line hl"><span class="cl"><span class="w">      </span><span class="nt">Replace</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line hl"><span class="cl"><span class="sd">        name: ssd_cal</span><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># -- snip --</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>We add the highlighted lines.
Then the &ldquo;name&rdquo; can be used at hist file by <code>@name@</code>!
The &ldquo;name&rdquo; can be freely set.</p>

<div class="tab-panel" data-tab-group="5a6a1dc868e4dbe3f92050e9a25ddefe">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="histssdssdyaml"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('5a6a1dc868e4dbe3f92050e9a25ddefe','histssdssdyaml')"
    >
      <span class="tab-nav-text">hist/ssd/ssd.yaml</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="histssdssdyaml"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">anchor</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="cp">&amp;energy</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;@name@.fCharge&#34;</span><span class="p">,</span><span class="m">100</span><span class="p">,</span><span class="m">0</span><span class="l">.,100.]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="cp">&amp;timing</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;@name@.fTiming&#34;</span><span class="p">,</span><span class="m">100</span><span class="p">,</span><span class="m">0</span><span class="l">.,100.]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">alias</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">energy_cut</span><span class="p">:</span><span class="w"> </span>@<span class="l">name@.fCharge&gt;1.0;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">group</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_test</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">contents</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="cp">*energy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_timing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_timing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="cp">*timing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy and timing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">ssd_energy and timing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="cp">*timing</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="cp">*energy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">cut</span><span class="p">:</span><span class="w"> </span><span class="l">energy_cut</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>This is useful when there are more objects to check!</p>

<div class="tab-panel" data-tab-group="90ebc5ae2781f948b282d0f37117beb9">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="chkssdyaml"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('90ebc5ae2781f948b282d0f37117beb9','chkssdyaml')"
    >
      <span class="tab-nav-text">chkssd.yaml</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="chkssdyaml"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># -- snip --</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="l">ssd/ssd_single.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># Histogram</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">projection_ssd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">art::TTreeProjectionProcessor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parameter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">FileName</span><span class="p">:</span><span class="w"> </span><span class="l">hist/ssd/ssd.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Type</span><span class="p">:</span><span class="w">     </span><span class="l">art::TTreeProjection</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">OutputFilename</span><span class="p">:</span><span class="w"> </span><span class="cp">*histout</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Replace</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">        name: ssd_cal</span><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">projection_ssd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">art::TTreeProjectionProcessor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parameter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">FileName</span><span class="p">:</span><span class="w"> </span><span class="l">hist/ssd/ssd.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Type</span><span class="p">:</span><span class="w">     </span><span class="l">art::TTreeProjection</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Replace</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">        name: ssd_raw</span><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># and so on!</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># -- snip --</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>File splitting using &ldquo;include&rdquo; nodes, as described in the section on steeling, can also be used in the same way.</p>

            <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:okawa@cns.s.u-tokyo.ac.jp">KodaiOkawa</a>
              <i class='fa-fw fas fa-calendar'></i> Nov 14, 2023
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="/artemis_crib/js/clipboard.min.js?1723881510" defer></script>
    <script src="/artemis_crib/js/perfect-scrollbar.min.js?1723881510" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/artemis_crib/js/theme.js?1723881510" defer></script>
  </body>
</html>
