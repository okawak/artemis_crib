<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.19.0+tip">
    <meta name="description" content="">
    <meta name="author" content="Kodai Okawa">
    <title>Installation :: CRIB artemis</title>
    <link href="https://okawak.github.io/artemis_crib/installation/index.html" rel="canonical" type="text/html" title="Installation :: CRIB artemis">
    <link href="/artemis_crib/installation/index.xml" rel="alternate" type="application/rss+xml" title="Installation :: CRIB artemis">
    <link href="/artemis_crib/images/logo.png?1692440235" rel="icon" type="image/png">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="/artemis_crib/css/fontawesome-all.min.css?1692440236" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fontawesome-all.min.css?1692440236" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/nucleus.css?1692440236" rel="stylesheet">
    <link href="/artemis_crib/css/auto-complete.css?1692440236" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/auto-complete.css?1692440236" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/perfect-scrollbar.min.css?1692440236" rel="stylesheet">
    <link href="/artemis_crib/css/fonts.css?1692440236" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fonts.css?1692440236" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/theme.css?1692440236" rel="stylesheet">
    <link href="/artemis_crib/css/theme-auto.css?1692440236" rel="stylesheet" id="variant-style">
    <link href="/artemis_crib/css/variant.css?1692440236" rel="stylesheet">
    <link href="/artemis_crib/css/print.css?1692440236" rel="stylesheet" media="print">
    <link href="/artemis_crib/css/format-print.css?1692440236" rel="stylesheet">
    <link href="/artemis_crib/css/ie.css?1692440236" rel="stylesheet">
    <script src="/artemis_crib/js/url.js?1692440236"></script>
    <script src="/artemis_crib/js/variant.js?1692440236"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="/artemis_crib/index.search.js";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/okawak.github.io\/artemis_crib/';
      window.variants && variants.init( [ 'auto' ] );
    </script>
  </head>
  <body class="mobile-support print" data-url="/artemis_crib/installation/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/index.html"><span itemprop="name">CRIB artemis</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Installation</span><meta itemprop="position" content="2"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">Chapter 1</div>
<h1 id="installation">Installation</h1>

<p>This chapter describes how to set up the artemis environment for the CRIB experiment.</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Installation</h1>
          <article class="default">
            <header class="headline">
<div class="tags">
  <a class="tag-link" href="/artemis_crib/tags/environment/index.html">environment</a>
</div>
            </header>
<h1 id="requirements">Requirements</h1>

<p>The following machines have been tested for operation.</p>
<ul>
<li>Almalinux 9.2</li>
<li>zsh 5.8</li>
<li>gcc 11.3.1</li>
<li>cmake 3.20.2</li>
<li>ROOT 6.28/04</li>
<li>yaml-cpp 0.7.0</li>
</ul>
<p>Scripts for some automate operation are written in <code>zsh</code> format.</p>
<hr>
<p>As for the <code>Ubuntu</code> 22.04 (LTS), there appeared to be a linking problem and a dummy file had to be set up to force the link.</p>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="root">Root</h1>

<p>Artemis uses <a href="https://root.cern/" target="_blank">ROOT library</a>.</p>
<p>We confirmed that version 6.28 of the ROOT will work well, but if the ROOT updates, we are not sure that the ARTEMIS will work well,
so we recommend to build from the sources.</p>
<p>For detailded information, please refer <a href="https://root.cern/install/" target="_blank">Installing ROOT</a>
Recommendations are described below.</p>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># The latest stable branch gets updated automatically on each release.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># You may update your local copy by issuing a `git pull` command from within `root_src/`.</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> hoge <span class="c1"># where you want to install ROOT</span>
</span></span><span class="line"><span class="cl">git clone --branch latest-stable --depth<span class="o">=</span><span class="m">1</span> https://github.com/root-project/root.git root_src
</span></span><span class="line"><span class="cl">mkdir root_build root_install <span class="o">&amp;&amp;</span> <span class="nb">cd</span> root_build
</span></span><span class="line"><span class="cl">cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span>../root_install ../root_src <span class="c1"># &amp;&amp; check cmake configuration output for warnings or errors</span>
</span></span><span class="line"><span class="cl">cmake --build . -- install -j4 <span class="c1"># if you have 4 cores available for compilation</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ../root_install/bin/thisroot.sh <span class="c1"># or thisroot.{fish,csh}</span></span></span></code></pre></div><p>If there are any problems at the compile, additional packages may need to be installed.
See also <a href="https://root.cern/install/dependencies/" target="_blank">dependencies</a>.</p>
<p><code>source thisroot.sh</code> part will be written in thisartemis.sh (this is created after artemis installation),
so you don&rsquo;t have to execute this command for each time.</p>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="yaml-cpp">Yaml-cpp</h1>

<p>Current version of the artemis use yaml-cpp-0.7.
If your package system (like <code>apt</code> or <code>dnf</code>) cannot install version 0.7, please install from the source.</p>
<p>See also <a href="https://github.com/jbeder/yaml-cpp" target="_blank">Github repo</a> and <a href="https://github.com/artemis-dev/artemis/blob/develop/README.md" target="_blank">README of the artemis</a>
Please install it as a shared object like below commands.</p>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> path/to/the/directory/you/want/to/install/yaml-cpp
</span></span><span class="line"><span class="cl">git clone https://github.com/jbeder/yaml-cpp.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> yaml-cpp
</span></span><span class="line"><span class="cl">mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">cmake -DYAML_BUILD_SHARED_LIBS<span class="o">=</span>ON -DBUILD_TESTING<span class="o">=</span>OFF ..
</span></span><span class="line"><span class="cl">make
</span></span><span class="line"><span class="cl">sudo make install</span></span></code></pre></div><p>Default install path is <code>/usr/local/lib</code> or <code>/usr/local/lib64</code>.
If you do not want to pollute the general environment, specify <code>CMAKE_INSTALL_PREFIX</code> and set <strong>PATH</strong> environment variable.</p>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/foo/bar -DYAML_BUILD_SHARED_LIBS<span class="o">=</span>ON -DBUILD_TESTING<span class="o">=</span>OFF ..</span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="artemis">Artemis</h1>

<span class="badge cstyle warning badge-with-title"><span class="badge-title"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</span><span class="badge-content">Not recommended</span></span>
<p>From the current situation, CRIB experiment doesn&rsquo;t use GET system,
so we describe how to install it without linking it to GET decoder.</p>
<p>Also, it can link to <code>openMPI</code>, but the below commands assume not using openMPI.
See <a href="https://github.com/artemis-dev/artemis/blob/develop/README.md" target="_blank">artemis repo</a> for more information.</p>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> hoge
</span></span><span class="line"><span class="cl">git clone https://github.com/artemis-dev/artemis.git -b develop
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> artemis
</span></span><span class="line"><span class="cl">mkdir build
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">cmake -DCMAKE_INSTALL_PREFIX<span class="o">=</span>../install ..
</span></span><span class="line"><span class="cl">make -j8
</span></span><span class="line"><span class="cl">make install</span></span></code></pre></div><p>Then, <code>&lt;CMAKE_INSTALL_PREFIX&gt;/bin/thisartemis.sh</code> will be created
and this shell script can configure the environment (ROOT, yaml-cpp, artemis libraries) to use artemis.</p>
<p>(It means you don&rsquo;t have to write like <code>export PATH=${yaml-cpp path}:$PATH</code> or <code>source thisroot.sh</code> in .zshrc or .bashrc.)</p>
<p>Another option is to use <code>module</code> command to manage the environment.
It is also written in <a href="https://github.com/artemis-dev/artemis/blob/develop/README.md" target="_blank">artemis repo</a>.</p>
<hr>
<p><strong>The following methods are not recommended!!</strong></p>
<p>For Ubuntu case, somehow it seems that there are some linking problem.</p>
<p>To avoid it, if I changed like below, the artemis will work well&hellip;</p>
<ul>
<li>[Mod] artemis/sources/main/CMakeLists.txt</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="cl"><span class="gd">- add_executable(artemis main.cc TArtRint.cc)
</span></span></span><span class="line"><span class="cl"><span class="gd"></span><span class="gi">+ add_executable(artemis main.cc dummy.cc TArtRint.cc)
</span></span></span></code></pre></div><ul>
<li>[Add] artemis/sources/main/dummy.cc</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;TModuleDecoderV1190.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;TParameterLoader.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;TTreeProjection.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;TRDFEventStore.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;TRIDFEventStore.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// any class seems okay
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">dummy</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">art</span><span class="o">::</span><span class="n">TModuleDecoderV1190</span> <span class="o">*</span><span class="n">dummy_decoder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TModuleDecoderV1190</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="n">art</span><span class="o">::</span><span class="n">TParameterLoader</span> <span class="o">*</span><span class="n">dummy_param</span> <span class="o">=</span> <span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TParameterLoader</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="n">art</span><span class="o">::</span><span class="n">TTreeProjection</span> <span class="o">*</span><span class="n">dummy_hist</span> <span class="o">=</span> <span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TTreeProjection</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="n">art</span><span class="o">::</span><span class="n">TRDFEventStore</span> <span class="o">*</span><span class="n">dummy_rdf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TRDFEventStore</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="n">art</span><span class="o">::</span><span class="n">TRIDFEventStore</span> <span class="o">*</span><span class="n">dummy_ridf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TRIDFEventStore</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>Libraries that are not directly involved in the artemis executable do not seem to be linked,
despite using target_link_library(hoge) in CMakeLists.txt.</p>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="directory">Directory</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="art_analysis">Art_analysis</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="energyloss_calculator">Energyloss_calculator</h1>


            <footer class="footline">

            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="/artemis_crib/js/clipboard.min.js?1692440236" defer></script>
    <script src="/artemis_crib/js/perfect-scrollbar.min.js?1692440236" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/artemis_crib/js/theme.js?1692440236" defer></script>
  </body>
</html>
