<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.19.0+tip">
    <meta name="description" content="">
    <title>Installation :: CRIB artemis</title>
    <link href="https://okawak.github.io/artemis_crib/installation/index.html" rel="canonical" type="text/html" title="Installation :: CRIB artemis">
    <link href="/artemis_crib/installation/index.xml" rel="alternate" type="application/rss+xml" title="Installation :: CRIB artemis">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="/artemis_crib/css/fontawesome-all.min.css?1691993939" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fontawesome-all.min.css?1691993939" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/nucleus.css?1691993939" rel="stylesheet">
    <link href="/artemis_crib/css/auto-complete.css?1691993939" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/auto-complete.css?1691993939" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/perfect-scrollbar.min.css?1691993939" rel="stylesheet">
    <link href="/artemis_crib/css/fonts.css?1691993939" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fonts.css?1691993939" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/theme.css?1691993939" rel="stylesheet">
    <link href="/artemis_crib/css/theme-auto.css?1691993939" rel="stylesheet" id="variant-style">
    <link href="/artemis_crib/css/variant.css?1691993939" rel="stylesheet">
    <link href="/artemis_crib/css/print.css?1691993939" rel="stylesheet" media="print">
    <link href="/artemis_crib/css/format-print.css?1691993939" rel="stylesheet">
    <link href="/artemis_crib/css/ie.css?1691993939" rel="stylesheet">
    <script src="/artemis_crib/js/url.js?1691993939"></script>
    <script src="/artemis_crib/js/variant.js?1691993939"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="/artemis_crib/index.search.js";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/okawak.github.io\/artemis_crib/';
      window.variants && variants.init( [ 'auto' ] );
    </script>
  </head>
  <body class="mobile-support print" data-url="/artemis_crib/installation/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/index.html"><span itemprop="name">CRIB artemis</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Installation</span><meta itemprop="position" content="2"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">Chapter 1</div>
<h1 id="installation">Installation</h1>

<p>This chapter describes how to set up the artemis environment for the CRIB experiment.</p>

            <footer class="footline">

            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Installation</h1>
          <article class="default">
            <header class="headline">
<div class="tags">
  <a class="tag-link" href="/artemis_crib/tags/environment/index.html">environment</a>
</div>
            </header>
<h1 id="requirements">Requirements</h1>

<p>The following machines have been tested for operation.</p>
<ul>
<li>Almalinux 9.2</li>
<li>zsh 5.8</li>
<li>gcc 11.3.1</li>
<li>cmake 3.20.2</li>
<li>ROOT 6.28/04</li>
<li>yaml-cpp 0.7.0</li>
</ul>
<p>Scripts for some automate operation are written in <code>zsh</code> format.</p>
<hr>
<p>As for the <code>Ubuntu</code> 22.04 (LTS), there appeared to be a linking problem and a dummy file had to be set up to force the link.</p>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="root">Root</h1>

<p>Artemis uses <a href="https://root.cern/" target="_blank">ROOT library</a>.</p>
<p>We confirmed that version 6.28 of the ROOT will work well, but if the ROOT updates, we are not sure that the ARTEMIS will work well,
so we recommend to build from the sources.</p>
<p>For detailded information, please refer <a href="https://root.cern/install/" target="_blank">Installing ROOT</a>
Recommendations are described below.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># The latest stable branch gets updated automatically on each release.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># You may update your local copy by issuing a `git pull` command from within `root_src/`.</span>
</span></span><span style="display:flex;"><span>cd hoge <span style="color:#75715e"># where you want to install ROOT</span>
</span></span><span style="display:flex;"><span>git clone --branch latest-stable --depth<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> https://github.com/root-project/root.git root_src
</span></span><span style="display:flex;"><span>mkdir root_build root_install <span style="color:#f92672">&amp;&amp;</span> cd root_build
</span></span><span style="display:flex;"><span>cmake -DCMAKE_INSTALL_PREFIX<span style="color:#f92672">=</span>../root_install ../root_src <span style="color:#75715e"># &amp;&amp; check cmake configuration output for warnings or errors</span>
</span></span><span style="display:flex;"><span>cmake --build . -- install -j4 <span style="color:#75715e"># if you have 4 cores available for compilation</span>
</span></span><span style="display:flex;"><span>source ../root_install/bin/thisroot.sh <span style="color:#75715e"># or thisroot.{fish,csh}</span></span></span></code></pre></div><p>If there are any problems at the compile, additional packages may need to be installed.
See also <a href="https://root.cern/install/dependencies/" target="_blank">dependencies</a>.</p>
<p><code>source thisroot.sh</code> part will be written in thisartemis.sh (this is created after artemis installation),
so you don&rsquo;t have to execute this command for each time.</p>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="yaml-cpp">Yaml-cpp</h1>

<p>Current version of the artemis use yaml-cpp-0.7.
If your package system (like <code>apt</code> or <code>dnf</code>) cannot install version 0.7, please install from the source.</p>
<p>See also <a href="https://github.com/jbeder/yaml-cpp" target="_blank">Github repo</a> and <a href="https://github.com/artemis-dev/artemis/blob/develop/README.md" target="_blank">README of the artemis</a>
Please install it as a shared object like below commands.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cd path/to/the/directory/you/want/to/install/yaml-cpp
</span></span><span style="display:flex;"><span>git clone https://github.com/jbeder/yaml-cpp.git
</span></span><span style="display:flex;"><span>cd yaml-cpp
</span></span><span style="display:flex;"><span>mkdir build <span style="color:#f92672">&amp;&amp;</span> cd build
</span></span><span style="display:flex;"><span>cmake -DYAML_BUILD_SHARED_LIBS<span style="color:#f92672">=</span>ON -DBUILD_TESTING<span style="color:#f92672">=</span>OFF ..
</span></span><span style="display:flex;"><span>make
</span></span><span style="display:flex;"><span>sudo make install</span></span></code></pre></div><p>Default install path is <code>/usr/local/lib</code> or <code>/usr/local/lib64</code>.
If you do not want to pollute the general environment, specify <code>CMAKE_INSTALL_PREFIX</code> and set <strong>PATH</strong> environment variable.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cmake -DCMAKE_INSTALL_PREFIX<span style="color:#f92672">=</span>/foo/bar -DYAML_BUILD_SHARED_LIBS<span style="color:#f92672">=</span>ON -DBUILD_TESTING<span style="color:#f92672">=</span>OFF ..</span></span></code></pre></div>
            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="artemis">Artemis</h1>

<p>From the current situation, CRIB experiment doesn&rsquo;t use GET system,
so we describe how to install it without linking it to GET decoder.</p>
<p>Also, it can link to <code>openMPI</code>, but the below commands assume not using openMPI.
See <a href="https://github.com/artemis-dev/artemis/blob/develop/README.md" target="_blank">artemis repo</a> for more information.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cd hoge
</span></span><span style="display:flex;"><span>git clone https://github.com/artemis-dev/artemis.git -b develop
</span></span><span style="display:flex;"><span>cd artemis
</span></span><span style="display:flex;"><span>mkdir build
</span></span><span style="display:flex;"><span>cd build
</span></span><span style="display:flex;"><span>cmake -DCMAKE_INSTALL_PREFIX<span style="color:#f92672">=</span>../install ..
</span></span><span style="display:flex;"><span>make -j8
</span></span><span style="display:flex;"><span>make install</span></span></code></pre></div><p>Then, <code>&lt;CMAKE_INSTALL_PREFIX&gt;/bin/thisartemis.sh</code> will be created
and this shell script can configure the environment (ROOT, yaml-cpp, artemis libraries) to use artemis.</p>
<p>(It means you don&rsquo;t have to write like <code>export PATH=${yaml-cpp path}:$PATH</code> or <code>source thisroot.sh</code> in .zshrc or .bashrc.)</p>
<p>Another option is to use <code>module</code> command to manage the environment.
It is also written in <a href="https://github.com/artemis-dev/artemis/blob/develop/README.md" target="_blank">artemis repo</a>.</p>
<hr>
<p><strong>The following methods are not recommended!!</strong></p>
<p>For Ubuntu case, somehow it seems that there are some linking problem.</p>
<p>To avoid it, if I changed like below, the artemis will work well&hellip;</p>
<ul>
<li>[Mod] artemis/sources/main/CMakeLists.txt</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span><span style="color:#f92672">- add_executable(artemis main.cc TArtRint.cc)
</span></span></span><span style="display:flex;"><span><span style="color:#f92672"></span><span style="color:#a6e22e">+ add_executable(artemis main.cc dummy.cc TArtRint.cc)
</span></span></span></code></pre></div><ul>
<li>[Add] artemis/sources/main/dummy.cc</li>
</ul>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;TModuleDecoderV1190.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;TParameterLoader.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;TTreeProjection.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;TRDFEventStore.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;TRIDFEventStore.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// any class seems okay
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">dummy</span>()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  art<span style="color:#f92672">::</span>TModuleDecoderV1190 <span style="color:#f92672">*</span>dummy_decoder <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> art<span style="color:#f92672">::</span>TModuleDecoderV1190();
</span></span><span style="display:flex;"><span>  art<span style="color:#f92672">::</span>TParameterLoader <span style="color:#f92672">*</span>dummy_param <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> art<span style="color:#f92672">::</span>TParameterLoader();
</span></span><span style="display:flex;"><span>  art<span style="color:#f92672">::</span>TTreeProjection <span style="color:#f92672">*</span>dummy_hist <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> art<span style="color:#f92672">::</span>TTreeProjection();
</span></span><span style="display:flex;"><span>  art<span style="color:#f92672">::</span>TRDFEventStore <span style="color:#f92672">*</span>dummy_rdf <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> art<span style="color:#f92672">::</span>TRDFEventStore();
</span></span><span style="display:flex;"><span>  art<span style="color:#f92672">::</span>TRIDFEventStore <span style="color:#f92672">*</span>dummy_ridf <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> art<span style="color:#f92672">::</span>TRIDFEventStore();
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>Libraries that are not directly involved in the artemis executable do not seem to be linked,
despite using target_link_library(hoge) in CMakeLists.txt.</p>

            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="directory">Directory</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="art_analysis">Art_analysis</h1>


            <footer class="footline">

            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>
<h1 id="energyloss_calculator">Energyloss_calculator</h1>


            <footer class="footline">

            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="/artemis_crib/js/clipboard.min.js?1691993939" defer></script>
    <script src="/artemis_crib/js/perfect-scrollbar.min.js?1691993939" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/artemis_crib/js/theme.js?1691993939" defer></script>
  </body>
</html>
