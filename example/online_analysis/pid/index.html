<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 5.22.0">
    <meta name="description" content="Documentation for CRIB artemis">
    <meta name="author" content="map[name:Kodai Okawa]">
    <title>Beam PID :: CRIB artemis</title>
    <link href="/artemis_crib/example/online_analysis/pid/index.xml" rel="alternate" type="application/rss+xml" title="Beam PID :: CRIB artemis">
    <link href="/artemis_crib/example/online_analysis/pid/index.print.html" rel="alternate" type="text/html" title="Beam PID :: CRIB artemis"><link rel="icon" href="/artemis_crib/images/crib_overlay.png" type="image/png">

    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="/artemis_crib/css/fontawesome-all.min.css?1710994944" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fontawesome-all.min.css?1710994944" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/nucleus.css?1710994944" rel="stylesheet">
    <link href="/artemis_crib/css/auto-complete.css?1710994944" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/auto-complete.css?1710994944" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/perfect-scrollbar.min.css?1710994944" rel="stylesheet">
    <link href="/artemis_crib/css/fonts.css?1710994944" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fonts.css?1710994944" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/theme.css?1710994944" rel="stylesheet">
    <link href="/artemis_crib/css/theme-CRIB-theme.css?1710994944" rel="stylesheet" id="R-variant-style">
    <link href="/artemis_crib/css/variant.css?1710994944" rel="stylesheet">
    <link href="/artemis_crib/css/print.css?1710994944" rel="stylesheet" media="print">
    <link href="/artemis_crib/css/ie.css?1710994944" rel="stylesheet">
    <script src="/artemis_crib/js/url.js?1710994944"></script>
    <script src="/artemis_crib/js/variant.js?1710994944"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="/artemis_crib/index.search.js";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_Reset_view = 'Reset view';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/okawak.github.io\/artemis_crib/';
      window.variants && variants.init( [ 'CRIB-theme', 'relearn-auto', 'relearn-dark', 'zen-dark', 'learn' ] );
    </script>

  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MZF67K577Y"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-MZF67K577Y');
  </script>
  


  </head>
  <body class="mobile-support html" data-url="/artemis_crib/example/online_analysis/pid/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
              <button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)">
                <i class="fa-fw fas fa-bars"></i>
              </button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
              <button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)">
                <i class="fa-fw fas fa-list-alt"></i>
              </button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#principles">Principles</a></li>
        <li><a href="#usage">Usage</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/example/index.html"><span itemprop="name">Example</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/example/online_analysis/index.html"><span itemprop="name">Online analysis</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Beam PID</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-edit" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
              <a class="topbar-control" href="https://github.com/okawak/artemis_crib/tree/pages-build/content/example/online_analysis/pid.md" target="_blank" title="Edit (CTRL&#43;ALT&#43;w)">
                <i class="fa-fw fas fa-pen"></i>
              </a>
            </div>
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show">
              <a class="topbar-control" href="/artemis_crib/example/online_analysis/pid/index.print.html" title="Print whole chapter (CTRL&#43;ALT&#43;p)">
                <i class="fa-fw fas fa-print"></i>
              </a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
              <a class="topbar-control" href="/artemis_crib/example/online_analysis/f1/index.html" title="F1 (ðŸ¡)">
                <i class="fa-fw fas fa-chevron-left"></i>
              </a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
              <a class="topbar-control" href="/artemis_crib/example/online_analysis/f2/index.html" title="F2 (ðŸ¡’)">
                <i class="fa-fw fas fa-chevron-right"></i>
              </a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
              <button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More">
                <i class="fa-fw fas fa-ellipsis-v"></i>
              </button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
<div class="tags">
  <a class="tag-link" href="/artemis_crib/tags/need_update/index.html">need_update</a>
</div>
            </header>
<h1 id="beam-pid">Beam PID</h1>

<span class="badge cstyle default"><span class="badge-content">last modified: 2024-01-22 by Kodai Okawa</span></span>
<p>In the F2 focal plane, we check the secondary beam condition.
In other words, identify the beam particles we want and adjust the beamline parameters to get the most amount of the beam particle.
Therefore, we need to identify the beam ion from the data.
To do so, we perform simulation.</p>
<p>This is almost the same with <a href="https://www.cns.s.u-tokyo.ac.jp/crib/cgi-bin/pid/CRIB_PID_calc.html" target="_blank">this web application</a>.
This web application uses <code>enewz</code> energy loss calculation, but PID using artemis uses <code>SRIM</code>.</p>
<p>These are the source code for the PID calculation.</p>
<ul>
<li><a href="https://github.com/okawak/artemis_crib/blob/main/src-crib/simulation/TCRIBPIDProcessor.cc" target="_blank">TCRIBPIDProcessor.cc</a></li>
<li><a href="https://github.com/okawak/artemis_crib/blob/main/src-crib/simulation/TCRIBPIDProcessor.h" target="_blank">TCRIBPIDProcessor.h</a></li>
</ul>
<h3 id="principles">Principles</h3>
<p>The simple principle of PID (Particle IDentification) is described.</p>
<p>First, the energies of the various beam ions are determined from the value of the magnetic rigidity (
<span class="math align-center">$B\rho$</span>) of the dipole magnets.
The values are then calculated using relativity.</p>

<span class="math align-center">$$ m_0\gamma\frac{v^2}{\rho} = qevB $$
$$ B\rho = \frac{m_0\gamma\beta c}{qe} $$
$$ \frac{B\rho qe}{c} = m_0\frac{\beta}{\sqrt{1-\beta^2}} $$</span><p>From this equation, solving for 
<span class="math align-center">$\beta^2$</span>,</p>

<span class="math align-center">$$ \beta^2 = \frac{1}{1+\left( \frac{m_0 c}{B\rho qe} \right)^2} $$
$$ \frac{1}{\sqrt{1-\beta^2}} = \sqrt{1+\left( \frac{B\rho qe}{m_0 c} \right)^2} $$</span><p>Relativistic energy 
<span class="math align-center">$E$</span> is</p>

<span class="math align-center">$$ E = \frac{m_0 c^2}{\sqrt{1-\beta^2}} $$
$$ E^2 = \left(m_0 c^2\right)^2 + \left( B\rho qec \right)^2 $$</span><p>Therefore, from this equation, 
<span class="math align-center">$E$</span> can be obtained from 
<span class="math align-center">$B\rho$</span> and the kinetic energy can be derived from the following relationship.</p>

<span class="math align-center">$$ E = E_{kin} + m_0 c^2 $$
$$ E_{kin} = m_0 c^2\left( \sqrt{1+\left( \frac{B\rho qec}{m_0 c^2} \right)^2} -1 \right) $$</span><p>The equation for determining velocity from energy using relativity can also be obtained as follows.</p>

<span class="math align-center">$$ E_{kin} + m_0 c^2 = \frac{m_0 c^2}{\sqrt{1-\left(\frac{v}{c}\right)^2}} $$
$$ v = c\sqrt{1-\left( \frac{1}{\frac{E_{kin}}{m_0 c^2} +1} \right)^2} $$</span><p>The energy loss of the detector placed on the beamline is then calculated and the PID diagram is obtained by plotting the possible measured values using these relationships.</p>
<h3 id="usage">Usage</h3>
<p>First, please prepare the SRIMlib dataset.
You need all input ion for &ldquo;mylar&rdquo; and &ldquo;Si&rdquo; target energy loss table.
For the SRIMlib setting, please refer <a href="https://okawak.github.io/artemis_crib/installation/energyloss_calculator/index.html" target="_blank">this page</a>.</p>
<p>Next, you need input ions and beamline parameter files.
The format is like this.</p>

  
<div class="tab-panel" data-tab-group="231de0b63bc8029355917aec9c7d8711">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="prmpidexpnameyaml"
      class="tab-nav-button tab-panel-style cstyle initial active"
      onclick="switchTab('231de0b63bc8029355917aec9c7d8711','prmpidexpnameyaml')"
    >
      <span>
        <span class="tab-nav-hidden">prm/pid/expname.yaml</span>
        <span class="tab-nav-text">prm/pid/expname.yaml</span>
      </span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="prmpidexpnameyaml"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">input_ions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">7Li3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">charge</span><span class="p">:</span><span class="w"> </span><span class="m">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">mass</span><span class="p">:</span><span class="w"> </span><span class="m">7.01435758</span><span class="w"> </span><span class="c"># amu</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c"># 0 -&gt; red, 1 -&gt; blue, 2 -&gt; black</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">6He2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">charge</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">mass</span><span class="p">:</span><span class="w"> </span><span class="m">6.01778863</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">3H1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">charge</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">mass</span><span class="p">:</span><span class="w"> </span><span class="m">3.015500905</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">2H1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">charge</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">mass</span><span class="p">:</span><span class="w"> </span><span class="m">2.013553496</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">1H1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">charge</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">mass</span><span class="p">:</span><span class="w"> </span><span class="m">1.007276452</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">4He2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">charge</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">mass</span><span class="p">:</span><span class="w"> </span><span class="m">4.001506094</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># BLD parameters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">f1_parameters</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">brho</span><span class="p">:</span><span class="w"> </span><span class="m">1.227</span><span class="w"> </span><span class="c"># Tm</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rf_period</span><span class="p">:</span><span class="w"> </span><span class="m">57.0</span><span class="w"> </span><span class="c"># ns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">f2_parameters</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">PPAC_thickness</span><span class="p">:</span><span class="w"> </span><span class="m">10.0</span><span class="w"> </span><span class="c"># um, mylar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">SSD_thickness</span><span class="p">:</span><span class="w"> </span><span class="m">1500.0</span><span class="w"> </span><span class="c"># um</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">f3_parameters</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">a_thickness</span><span class="p">:</span><span class="w"> </span><span class="m">15.0</span><span class="w"> </span><span class="c"># um, mylar, PPACa/MWDCa</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">b_thickness</span><span class="p">:</span><span class="w"> </span><span class="m">15.0</span><span class="w"> </span><span class="c"># um, mylar, PPACb/MWDCb</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">distance</span><span class="p">:</span><span class="w"> </span><span class="m">290.5</span><span class="w"> </span><span class="c"># mm, between two tracking detectors</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">trigger</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="c"># PPACa/MWDCa -&gt; 0, PPACb/MWDCb -&gt; 1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># display parameters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">f2_display</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rf_offset</span><span class="p">:</span><span class="w"> </span>-<span class="m">6.5</span><span class="w"> </span><span class="c"># ns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rf_range</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">0.0</span><span class="p">,</span><span class="w"> </span><span class="m">120.0</span><span class="p">]</span><span class="w"> </span><span class="c"># ns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">energy_range</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">0.0</span><span class="p">,</span><span class="w"> </span><span class="m">100.0</span><span class="p">]</span><span class="w"> </span><span class="c"># MeV</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">f3_display</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rf_offset</span><span class="p">:</span><span class="w"> </span>-<span class="m">12.0</span><span class="w"> </span><span class="c"># ns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tof_offset</span><span class="p">:</span><span class="w"> </span>-<span class="m">2.7</span><span class="w"> </span><span class="c"># ns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rf_range</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">0.0</span><span class="p">,</span><span class="w"> </span><span class="m">120.0</span><span class="p">]</span><span class="w"> </span><span class="c"># ns</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tof_range</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m">0.0</span><span class="p">,</span><span class="w"> </span><span class="m">8.0</span><span class="p">]</span><span class="w"> </span><span class="c"># ns</span></span></span></code></pre></div></div>
    </div>
  </div>
</div>
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>You can add the beam ions freely, but you need to prepare SRIM Output table.</p>
</div>
</div>
<p>Lastly, let&rsquo;s prepare the steering file.
If you want to do only PID calculation, you can use <code>chkpid.yaml</code>.</p>

  
<div class="tab-panel" data-tab-group="aa607097ddefb40e14c78808e0f82004">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="steeringchkpidyaml"
      class="tab-nav-button tab-panel-style cstyle initial active"
      onclick="switchTab('aa607097ddefb40e14c78808e0f82004','steeringchkpidyaml')"
    >
      <span>
        <span class="tab-nav-hidden">steering/chkpid.yaml</span>
        <span class="tab-nav-text">steering/chkpid.yaml</span>
      </span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="steeringchkpidyaml"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">Processor</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">pid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">art::TCRIBPIDProcessor</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parameter</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">FileName</span><span class="p">:</span><span class="w"> </span><span class="l">prm/pid/expname.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Batch</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">OutputTransparency</span><span class="p">:</span><span class="w"> </span><span class="m">1</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>You can add these sentences for any other steering files.
I think it is useful when you want to overlap the data figure and calculation figure.
If you set <code>Batch: false</code>, the canvases for F2 PID and F3 PID will appear automatically.
<code>Batch: true</code> is quiet mode.</p>
<p>This is an example of the automatically generated figure.</p>
<figure><img src="/artemis_crib/example/online_analysis/pid/auto.png" width="600">
</figure>

<p>The process for the calculation is performed in init process (I mean not event loop), so when you <code>add</code> the steering file, the figure will be created.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&gt; acd
</span></span><span class="line"><span class="cl">&gt; a
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>0<span class="o">]</span> add steering/chkpid.yaml
</span></span><span class="line"><span class="cl"><span class="c1"># process is performed now</span>
</span></span><span class="line"><span class="cl"><span class="c1"># if Batch: false, the two PID figure will appear automatically </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>1<span class="o">]</span> ls
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> artemis
</span></span><span class="line"><span class="cl">&gt;   <span class="m">0</span> TDirectory pid             pid       
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>2<span class="o">]</span> <span class="nb">cd</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>3<span class="o">]</span> ls
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> pid
</span></span><span class="line"><span class="cl">&gt;   <span class="m">0</span> TMultiGraph                 F2_PID<span class="p">;</span> F2 RF <span class="o">[</span>ns<span class="o">]</span><span class="p">;</span> F2 SSD <span class="o">[</span>MeV<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">1</span> TMultiGraph                 F3_PID<span class="p">;</span> F3 RF <span class="o">[</span>ns<span class="o">]</span><span class="p">;</span> PPACs/MWDCs TOF <span class="o">[</span>ns<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">2</span> TCanvas F2_canvas       F2_canvas 
</span></span><span class="line"><span class="cl">    <span class="m">3</span> TCanvas F3_canvas       F3_canvas 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>4<span class="o">]</span> draw <span class="m">0</span></span></span></code></pre></div><figure><img src="/artemis_crib/example/online_analysis/pid/multigraph.png" width="600">
</figure>


<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>There are two kinds of object, <code>TMultiGraph</code> and <code>TCanvas</code>.
The <code>ht</code> command cannot draw these object, so I also made <code>draw</code> command to be able to draw &ldquo;TMultiGraph&rdquo; objects.</p>
<p>HOWEVER, even this &ldquo;draw&rdquo; command cannot display the &ldquo;TCanvas&rdquo; object yet&hellip;
If you save the object using <code>hstore</code> command or check from THttpServer, you can check the TCanvas objects.</p>
</div>
</div>
<p>This &ldquo;TMultiGraph&rdquo; object is useful when you want to overlay th data.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> ht something <span class="c1"># this is gaussian example</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> dr <span class="m">0</span> p same</span></span></code></pre></div><figure><img src="/artemis_crib/example/online_analysis/pid/overlap.png" width="600">
</figure>


            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<a id="logo" href="/artemis_crib">
  <p style="font-family: Arial; font-weight: bold; font-size: 2.0rem; mergin: 0;">CRIB artemis</p>
  
</a>

        </div>
        <form action="/artemis_crib/search.html" method="get"><div class="searchbox default-animation">
          <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
          <label class="a11y-only" for="R-search-by">Search</label>
          <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
          <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
        </div></form>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/artemis_crib/js/auto-complete.js?1710994944" defer></script>
        <script src="/artemis_crib/js/lunr/lunr.min.js?1710994944" defer></script>
        <script src="/artemis_crib/js/lunr/lunr.stemmer.support.min.js?1710994944" defer></script>
        <script src="/artemis_crib/js/lunr/lunr.multi.min.js?1710994944" defer></script>
        <script src="/artemis_crib/js/lunr/lunr.en.min.js?1710994944" defer></script>
        <script src="/artemis_crib/js/search.js?1710994944" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation">
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/installation/index.html" class=""><a class="padding" href="/artemis_crib/installation/index.html">Installation</a><ul id="R-subsections-d532c08ef757367cd12653650690f4a3" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/installation/requirements/index.html" class=""><a class="padding" href="/artemis_crib/installation/requirements/index.html">Requirements</a></li>
          <li data-nav-id="/artemis_crib/installation/cmake/index.html" class=""><a class="padding" href="/artemis_crib/installation/cmake/index.html">cmake</a></li>
          <li data-nav-id="/artemis_crib/installation/root/index.html" class=""><a class="padding" href="/artemis_crib/installation/root/index.html">ROOT</a></li>
          <li data-nav-id="/artemis_crib/installation/yaml-cpp/index.html" class=""><a class="padding" href="/artemis_crib/installation/yaml-cpp/index.html">yaml-cpp</a></li>
          <li data-nav-id="/artemis_crib/installation/artemis/index.html" class=""><a class="padding" href="/artemis_crib/installation/artemis/index.html">artemis</a></li>
          <li data-nav-id="/artemis_crib/installation/mount/index.html" class=""><a class="padding" href="/artemis_crib/installation/mount/index.html">mount setting</a></li>
          <li data-nav-id="/artemis_crib/installation/energyloss_calculator/index.html" class=""><a class="padding" href="/artemis_crib/installation/energyloss_calculator/index.html">energyloss calculator</a></li>
          <li data-nav-id="/artemis_crib/installation/art_analysis/index.html" class=""><a class="padding" href="/artemis_crib/installation/art_analysis/index.html">art_analysis</a></li></ul></li>
          <li data-nav-id="/artemis_crib/setting/index.html" class=""><a class="padding" href="/artemis_crib/setting/index.html">Setting</a><ul id="R-subsections-2ff307b4bcacfb437a6597d3e3df0b49" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/setting/new_experiment/index.html" class=""><a class="padding" href="/artemis_crib/setting/new_experiment/index.html">New experiment</a></li>
          <li data-nav-id="/artemis_crib/setting/new_user/index.html" class=""><a class="padding" href="/artemis_crib/setting/new_user/index.html">New user</a></li>
          <li data-nav-id="/artemis_crib/setting/build/index.html" class=""><a class="padding" href="/artemis_crib/setting/build/index.html">Build</a></li>
          <li data-nav-id="/artemis_crib/setting/artemis_commands/index.html" class=""><a class="padding" href="/artemis_crib/setting/artemis_commands/index.html">artemis commands</a></li>
          <li data-nav-id="/artemis_crib/setting/map_config/index.html" class=""><a class="padding" href="/artemis_crib/setting/map_config/index.html">Map configuration</a></li>
          <li data-nav-id="/artemis_crib/setting/steering/index.html" class=""><a class="padding" href="/artemis_crib/setting/steering/index.html">Steering</a></li>
          <li data-nav-id="/artemis_crib/setting/histograms/index.html" class=""><a class="padding" href="/artemis_crib/setting/histograms/index.html">Histograms</a></li>
          <li data-nav-id="/artemis_crib/setting/vncserver/index.html" class=""><a class="padding" href="/artemis_crib/setting/vncserver/index.html">VNC server</a></li></ul></li>
          <li data-nav-id="/artemis_crib/crib_parts/index.html" class=""><a class="padding" href="/artemis_crib/crib_parts/index.html">CRIB Configuration</a><ul id="R-subsections-a60d232d9b6960dc7b017d1604d8afdf" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/crib_parts/environment/index.html" class=""><a class="padding" href="/artemis_crib/crib_parts/environment/index.html">Analysis environment</a></li>
          <li data-nav-id="/artemis_crib/crib_parts/onlinemode/index.html" class=""><a class="padding" href="/artemis_crib/crib_parts/onlinemode/index.html">Online-mode analysis</a></li>
          <li data-nav-id="/artemis_crib/crib_parts/userconfig/index.html" class=""><a class="padding" href="/artemis_crib/crib_parts/userconfig/index.html">User config</a></li>
          <li data-nav-id="/artemis_crib/crib_parts/newcommand/index.html" class=""><a class="padding" href="/artemis_crib/crib_parts/newcommand/index.html">New commands</a></li>
          <li data-nav-id="/artemis_crib/crib_parts/minor_change/index.html" class=""><a class="padding" href="/artemis_crib/crib_parts/minor_change/index.html">Minor changes</a></li></ul></li>
          <li data-nav-id="/artemis_crib/example/index.html" class="parent "><a class="padding" href="/artemis_crib/example/index.html">Example</a><ul id="R-subsections-71d2f98538faea977f26c44afad0d6a0" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/example/preparation/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/index.html">Preparation</a><ul id="R-subsections-878aafdc6585570f925af3f8566d96e4" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/example/preparation/basic/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/basic/index.html">Basic</a></li>
          <li data-nav-id="/artemis_crib/example/preparation/tref/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/tref/index.html">Tref for V1190</a></li>
          <li data-nav-id="/artemis_crib/example/preparation/ppac_calibration/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/ppac_calibration/index.html">PPAC calibration</a></li>
          <li data-nav-id="/artemis_crib/example/preparation/mwdc_calibration/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/mwdc_calibration/index.html">MWDC calibration</a></li>
          <li data-nav-id="/artemis_crib/example/preparation/alpha_calibration/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/alpha_calibration/index.html">Alpha calibration</a></li>
          <li data-nav-id="/artemis_crib/example/preparation/mux_calibration/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/mux_calibration/index.html">MUX calibration</a></li>
          <li data-nav-id="/artemis_crib/example/preparation/set_parameter/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/set_parameter/index.html">Set parameters</a></li>
          <li data-nav-id="/artemis_crib/example/preparation/git/index.html" class=""><a class="padding" href="/artemis_crib/example/preparation/git/index.html">Git</a></li></ul></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/index.html" class="parent "><a class="padding" href="/artemis_crib/example/online_analysis/index.html">Online analysis</a><ul id="R-subsections-0b7fa165d4e35644434184596e07c9f3" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/example/online_analysis/f1/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/f1/index.html">F1</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/pid/index.html" class="active"><a class="padding" href="/artemis_crib/example/online_analysis/pid/index.html">Beam PID</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/f2/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/f2/index.html">F2</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/ppac/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/ppac/index.html">PPAC</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/mwdc/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/mwdc/index.html">MWDC</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/telescope/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/telescope/index.html">Telescope</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/f3/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/f3/index.html">F3</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/gate/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/gate/index.html">Gate</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/shift/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/shift/index.html">Shifter task</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/scaler/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/scaler/index.html">Scaler</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/timestamp/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/timestamp/index.html">Timestamp</a></li>
          <li data-nav-id="/artemis_crib/example/online_analysis/check_rawdata/index.html" class=""><a class="padding" href="/artemis_crib/example/online_analysis/check_rawdata/index.html">Raw data checker</a></li></ul></li>
          <li data-nav-id="/artemis_crib/example/offline_analysis/index.html" class=""><a class="padding" href="/artemis_crib/example/offline_analysis/index.html">Offline analysis</a><ul id="R-subsections-35fc1da11cfae0b2f04e6a6b03295509" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/example/offline_analysis/new_processor/index.html" class=""><a class="padding" href="/artemis_crib/example/offline_analysis/new_processor/index.html">New processors</a></li>
          <li data-nav-id="/artemis_crib/example/offline_analysis/merge_files/index.html" class=""><a class="padding" href="/artemis_crib/example/offline_analysis/merge_files/index.html">Merge files</a></li>
          <li data-nav-id="/artemis_crib/example/offline_analysis/python_environment/index.html" class=""><a class="padding" href="/artemis_crib/example/offline_analysis/python_environment/index.html">Python environment</a></li>
          <li data-nav-id="/artemis_crib/example/offline_analysis/pyroot/index.html" class=""><a class="padding" href="/artemis_crib/example/offline_analysis/pyroot/index.html">pyROOT</a></li></ul></li>
          <li data-nav-id="/artemis_crib/example/simulation/index.html" class=""><a class="padding" href="/artemis_crib/example/simulation/index.html">MC Simulation</a><ul id="R-subsections-da97c131a02beb5c9ec7fcba2a54ae7a" class="morespace collapsible-menu">
          <li data-nav-id="/artemis_crib/example/simulation/beam_generator/index.html" class=""><a class="padding" href="/artemis_crib/example/simulation/beam_generator/index.html">Beam_generator</a></li>
          <li data-nav-id="/artemis_crib/example/simulation/nbodyreaction/index.html" class=""><a class="padding" href="/artemis_crib/example/simulation/nbodyreaction/index.html">Nbodyreaction</a></li>
          <li data-nav-id="/artemis_crib/example/simulation/geometry/index.html" class=""><a class="padding" href="/artemis_crib/example/simulation/geometry/index.html">Geometry</a></li>
          <li data-nav-id="/artemis_crib/example/simulation/detect_particle/index.html" class=""><a class="padding" href="/artemis_crib/example/simulation/detect_particle/index.html">Detect_particle</a></li>
          <li data-nav-id="/artemis_crib/example/simulation/solidangle/index.html" class=""><a class="padding" href="/artemis_crib/example/simulation/solidangle/index.html">Solidangle</a></li></ul></li></ul></li>
          <li data-nav-id="/artemis_crib/q_and_a/index.html" class=""><a class="padding" href="/artemis_crib/q_and_a/index.html">Q&amp;A</a></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">Link</div>
          <ul class="space">
            <li><a class="padding" href="https://www.cns.s.u-tokyo.ac.jp/crib/crib-new/"><i class='fas  fa-home'></i> CRIB homepage</a></li>
            <li><a class="padding" href="https://github.com/okawak/artemis_crib"><i class='fab fa-fw fa-github'></i> GitHub repository</a></li>
            <li><a class="padding" href="https://gohugo.io/"><i class='fas fa-fw fa-bookmark'></i> Hugo Documentation</a></li>
            <li><a class="padding" href="/artemis_crib/tags/index.html"><i class='fas fa-fw fa-tags'></i> Tags</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fas fa-language fa-fw"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = baseUri + this.value;">
                      <option id="R-en" value="/artemis_crib/example/online_analysis/pid/index.html" lang="en" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch showVariantSwitch">
                <div class="padding menu-control">
                  <i class="fas fa-paint-brush fa-fw"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-CRIB-theme" value="CRIB-theme" selected>CRIB Theme</option>
                      <option id="R-relearn-auto" value="relearn-auto">Relearn Auto</option>
                      <option id="R-relearn-dark" value="relearn-dark">Relearn Dark</option>
                      <option id="R-zen-dark" value="zen-dark">Zen Dark</option>
                      <option id="R-learn" value="learn">Learn</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks">
                <div class="padding menu-control">
                  <i class="fas fa-history fa-fw"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter"><p>2023-2024 CRIB collabolators</p>
<p style="font-size: 0.7rem">Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>


          </div>
        </div>
      </div>
    </aside>
    <script src="/artemis_crib/js/clipboard.min.js?1710994944" defer></script>
    <script src="/artemis_crib/js/perfect-scrollbar.min.js?1710994944" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/artemis_crib/js/theme.js?1710994944" defer></script>
  </body>
</html>
