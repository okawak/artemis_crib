<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.132.1">
    <meta name="generator" content="Relearn 6.1.1">
    <meta name="description" content="last modified: 2023-12-13 by Kodai Okawa I would now like to introduce the actual analysis using the CRIB analysis server.">
    <meta name="author" content="Kodai Okawa">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Basic :: CRIB artemis">
    <meta name="twitter:description" content="last modified: 2023-12-13 by Kodai Okawa I would now like to introduce the actual analysis using the CRIB analysis server.">
    <meta property="og:url" content="https://okawak.github.io/artemis_crib/example/preparation/basic/index.html">
    <meta property="og:site_name" content="CRIB artemis">
    <meta property="og:title" content="Basic :: CRIB artemis">
    <meta property="og:description" content="last modified: 2023-12-13 by Kodai Okawa I would now like to introduce the actual analysis using the CRIB analysis server.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Example">
    <meta property="article:published_time" content="2023-12-13T14:58:34+09:00">
    <meta property="article:modified_time" content="2023-12-13T17:18:12+09:00">
    <meta itemprop="name" content="Basic :: CRIB artemis">
    <meta itemprop="description" content="last modified: 2023-12-13 by Kodai Okawa I would now like to introduce the actual analysis using the CRIB analysis server.">
    <meta itemprop="datePublished" content="2023-12-13T14:58:34+09:00">
    <meta itemprop="dateModified" content="2023-12-13T17:18:12+09:00">
    <meta itemprop="wordCount" content="791">
    <title>Basic :: CRIB artemis</title>
    <link href="https://okawak.github.io/artemis_crib/example/preparation/basic/index.html" rel="canonical" type="text/html" title="Basic :: CRIB artemis">
    <link href="/artemis_crib/example/preparation/basic/index.xml" rel="alternate" type="application/rss+xml" title="Basic :: CRIB artemis"><link rel="icon" href="/artemis_crib/images/crib_overlay.png" type="image/png">

    <link href="/artemis_crib/css/fontawesome-all.min.css?1723707125" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fontawesome-all.min.css?1723707125" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/nucleus.css?1723707125" rel="stylesheet">
    <link href="/artemis_crib/css/auto-complete.css?1723707125" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/auto-complete.css?1723707125" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/perfect-scrollbar.min.css?1723707125" rel="stylesheet">
    <link href="/artemis_crib/css/fonts.css?1723707125" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fonts.css?1723707125" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/theme.css?1723707125" rel="stylesheet">
    <link href="/artemis_crib/css/theme-CRIB-theme.css?1723707125" rel="stylesheet" id="R-variant-style">
    <link href="/artemis_crib/css/chroma-relearn-dark.css?1723707125" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/artemis_crib/css/variant.css?1723707125" rel="stylesheet">
    <link href="/artemis_crib/css/print.css?1723707125" rel="stylesheet" media="print">
    <link href="/artemis_crib/css/format-print.css?1723707125" rel="stylesheet">
    <script src="/artemis_crib/js/variant.js?1723707125"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/okawak.github.io\/artemis_crib';
      window.index_js_url="/artemis_crib/index.search.js?1723707125";
      // variant stuff
      window.variants && variants.init( [ 'CRIB-theme', 'zen-dark', 'learn', 'relearn-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
 

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-MZF67K577Y"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-MZF67K577Y");
</script>
 

  </head>
  <body class="mobile-support print" data-url="/artemis_crib/example/preparation/basic/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/example/index.html"><span itemprop="name">Example</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/example/preparation/index.html"><span itemprop="name">Preparation</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Basic</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/example/preparation/index.html" title="Preparation (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/example/preparation/tref/index.html" title="Tref for V1190 (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="basic">Basic</h1>

<span class="badge cstyle default"><span class="badge-content">last modified: 2023-12-13 by Kodai Okawa</span></span>
<p>I would now like to introduce the actual analysis using the CRIB analysis server.
There are two ways to enter the analysis server, directly or remotely via ssh.
If you come to CRIB and operate the server directly, I think it is quicker to analyse using the server
while asking the CRIB members directly as I think they are nearby.</p>
<h3 id="1-ssh-configuration">1. SSH configuration</h3>
<p>To enter the CRIB server, you need to enter the CNS network.
To do this, you need to create an account on the CNS login server.
Please contact Okawa (<a href="mailto:okawa@cns.s.u-tokyo.ac.jp" rel="external" target="_blank">okawa@cns.s.u-tokyo.ac.jp</a>) or the person responsible for CRIB <a href="https://www.cns.s.u-tokyo.ac.jp/crib/crib-new/home-en/index.html" rel="external" target="_blank">(see here)</a> and tell us that you want a login server account.</p>
<p>The CNS login server uses public key cryptography, so you need to send a shared key when you apply.
This section describes how to create the key, especially on MacOS.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> <span class="c1"># move to /Users/yourname/ (home directory)</span>
</span></span><span class="line"><span class="cl">mkdir .ssh <span class="c1"># if there is no .ssh directory</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> .ssh
</span></span><span class="line"><span class="cl">ssh-keygen</span></span></code></pre></div><p>You will be asked a number of interactive questions after this command, all of which are fine by default (Enter).
Then you will see the pair of public-key and private-key.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ls 
</span></span><span class="line"><span class="cl">id_rsa  id_rsa.pub</span></span></code></pre></div><p><code>id_rsa</code> is the private-key, and <code>id_rsa.pub</code> is the public-key.
The private key is important for security reasons and should be kept on your own computer.
Then, please send this public-key to the CNS member.
in MacOS, <code>open .</code> command will open a finder for that directory, so it is easy to attach it to an email from here.
In the email,</p>
<ul>
<li>your fullname (affiliation)</li>
<li>username</li>
<li>attached public-key</li>
</ul>
<p>are needed.</p>
<p>Next, let&rsquo;s set up multi-stage ssh.
As the login server is just a jump server, it is useful to be able to ssh to the CRIB analysis server at once!
So create the following config file. The file placed in this directory is automatically read when you ssh.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> ~/.ssh
</span></span><span class="line"><span class="cl">vi config</span></span></code></pre></div>
<div class="tab-panel" data-tab-group="e4ce99efc2ea5cdb34c4d0db4cd39f73">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="sshconfig"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('e4ce99efc2ea5cdb34c4d0db4cd39f73','sshconfig')"
    >
      <span class="tab-nav-text">~/.ssh/config</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="sshconfig"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-aconf" data-lang="aconf"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="nb">Host</span> login
</span></span><span class="line hl"><span class="ln"> 2</span><span class="cl">    <span class="nb">HostName</span> CNS_loginserver_hostname
</span></span><span class="line hl"><span class="ln"> 3</span><span class="cl">    <span class="nb">User</span> username
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">    <span class="nb">IdentityFile</span> ~/.ssh/id_rsa
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    <span class="nb">ForWardX11Timeout</span> <span class="m">24</span>h
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">    <span class="nb">ControlPersist</span> <span class="m">30</span>m
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    <span class="nb">ForwardAgent</span> yes
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">    <span class="nb">ControlMaster</span> auto
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="nb">ControlPath</span> ~/.ssh/mux-%r@%h:%p
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c"># any name is okay</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="nb">Host</span> cribana
</span></span><span class="line hl"><span class="ln">13</span><span class="cl">    <span class="nb">HostName</span> analysisPC_hostname
</span></span><span class="line"><span class="ln">14</span><span class="cl">    <span class="nb">User</span> crib
</span></span><span class="line"><span class="ln">15</span><span class="cl">    <span class="nb">IdentityFile</span> ~/.ssh/id_rsa
</span></span><span class="line"><span class="ln">16</span><span class="cl">    <span class="nb">ProxyCommand</span> ssh login nc %h %p
</span></span><span class="line"><span class="ln">17</span><span class="cl">    <span class="nb">ForwardAgent</span> yes
</span></span><span class="line"><span class="ln">18</span><span class="cl">    <span class="nb">ControlMaster</span> auto
</span></span><span class="line"><span class="ln">19</span><span class="cl">    <span class="nb">ControlPath</span> ~/.ssh/mux-%r@%h:%p
</span></span><span class="line"><span class="ln">20</span><span class="cl">    <span class="nb">ControlPersist</span> <span class="m">30</span>m</span></span></code></pre></div></div>
    </div>
  </div>
</div><p>You will be informed of the second and third lines above that we highlighted, so please change this parts.
And ask the IP address of the CRIB analysis PC to the CRIB member, and change the 13 line.</p>
<p>Then you can enter the CRIB analysis PC just by</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ssh cribana</span></span></code></pre></div><p>CRIB member will tell you the passward!</p>
<p>For the VNC server (local forwarding), please see <a href="https://okawak.github.io/artemis_crib/setting/vncserver/index.html" rel="external" target="_blank">this section</a>.</p>
<h3 id="2-your-artemis-configuration">2. your artemis configuration</h3>
<p>When you enter the CRIB computer, please check this is <code>zsh</code> shell.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&gt; <span class="nb">echo</span> <span class="nv">$SHELL</span>
</span></span><span class="line"><span class="cl">/usr/local/bin/zsh</span></span></code></pre></div>
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Currently, zsh installed locally is used. It is planned to update the OS in the future, after which it will differ from this path in the future.</p>
</div>
</div>
<p>If it is not <code>zsh</code> (like bash), please command</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&gt; zsh</span></span></code></pre></div><p>Then you can start to configure by</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&gt; artlogin yourname
</span></span><span class="line"><span class="cl"><span class="c1"># input your information...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&gt; mkdir build
</span></span><span class="line"><span class="cl">&gt; <span class="nb">cd</span> build
</span></span><span class="line"><span class="cl">&gt; cmake ..
</span></span><span class="line"><span class="cl">&gt; make -j4
</span></span><span class="line"><span class="cl">&gt; make install
</span></span><span class="line"><span class="cl">&gt; acd</span></span></code></pre></div><p>For the detail, please check <a href="https://okawak.github.io/artemis_crib/setting/new_user/index.html" rel="external" target="_blank">here</a>.</p>
<h3 id="3-basic-usage">3. basic usage</h3>
<ul>
<li>start artemis</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&gt; acd <span class="c1"># move to your artemis work directory</span>
</span></span><span class="line"><span class="cl">&gt; a <span class="c1"># start artemis!</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&gt; a macro/macro.C <span class="c1"># run macro script</span></span></span></code></pre></div><ul>
<li>important command in the artemis console</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># read steering file</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> add steering/hoge.yaml <span class="nv">NAME</span><span class="o">=</span>hoge <span class="nv">NUM</span><span class="o">=</span><span class="m">0000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># start event loop</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> res
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> start <span class="c1"># defined in CRIB artemis</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># stop event loop</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> sus
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> stop <span class="c1"># defined in CRIB artemis</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># help</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> <span class="nb">help</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># quit from artemis</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> .q</span></span></code></pre></div><ul>
<li>commands for checking histograms</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># check and move the directory</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> ls
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> <span class="nb">cd</span> <span class="m">0</span> <span class="c1"># cd ID</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># move to home directory in artemis</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> <span class="nb">cd</span> <span class="c1"># cd .. will work?</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># draw the histograms</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> ht <span class="m">0</span> colz <span class="c1"># ht ID option</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> hn colz <span class="c1"># draw the next histogram object</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> hb colz <span class="c1"># draw the previous histogram object</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># divide the canvas</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> zone <span class="m">2</span> <span class="m">2</span> <span class="c1"># 2 x 2 canvas</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># save and print the canvas</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> sa
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> pri</span></span></code></pre></div><ul>
<li>analize using TTree</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># check the files</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> fls
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># move to the created ROOT file</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> fcd <span class="m">0</span> <span class="c1"># fcd fileID</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># check the all branches</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> br
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># check the data members or methods</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> br branchname <span class="c1"># ex. artemis [1] br ppaca</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># the name of TTree object is &#34;tree&#34; (actually TArtTree object)</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[</span>*<span class="o">]</span> tree-&gt;Draw<span class="o">(</span><span class="s2">&#34;ppaca.fY:ppaca.fX&gt;&gt;ppaca(100,-20.,20., 100,-20.,20.)&#34;</span>,<span class="s2">&#34;&#34;</span>,<span class="s2">&#34;colz&#34;</span><span class="o">)</span></span></span></code></pre></div><p>See <a href="https://okawak.github.io/artemis_crib/setting/artemis_commands/index.html" rel="external" target="_blank">here</a> for an example using random numbers.</p>

            <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:okawa@cns.s.u-tokyo.ac.jp">KodaiOkawa</a>
              <i class='fa-fw fas fa-calendar'></i> Dec 13, 2023
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="/artemis_crib/js/clipboard.min.js?1723707125" defer></script>
    <script src="/artemis_crib/js/perfect-scrollbar.min.js?1723707125" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/artemis_crib/js/theme.js?1723707125" defer></script>
  </body>
</html>
