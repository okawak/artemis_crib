<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.132.1">
    <meta name="generator" content="Relearn 6.1.1">
    <meta name="description" content="last modified: 2024-08-14 by Kodai Okawa A brief example of an analysis flow using artemis_crib is given below.">
    <meta name="author" content="Kodai Okawa">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Analysis example :: CRIB artemis">
    <meta name="twitter:description" content="last modified: 2024-08-14 by Kodai Okawa A brief example of an analysis flow using artemis_crib is given below.">
    <meta property="og:url" content="https://okawak.github.io/artemis_crib/example/offline_analysis/analysis_example/index.html">
    <meta property="og:site_name" content="CRIB artemis">
    <meta property="og:title" content="Analysis example :: CRIB artemis">
    <meta property="og:description" content="last modified: 2024-08-14 by Kodai Okawa A brief example of an analysis flow using artemis_crib is given below.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Example">
    <meta property="article:published_time" content="2024-07-30T17:28:14+09:00">
    <meta property="article:modified_time" content="2024-08-14T14:20:04+09:00">
    <meta itemprop="name" content="Analysis example :: CRIB artemis">
    <meta itemprop="description" content="last modified: 2024-08-14 by Kodai Okawa A brief example of an analysis flow using artemis_crib is given below.">
    <meta itemprop="datePublished" content="2024-07-30T17:28:14+09:00">
    <meta itemprop="dateModified" content="2024-08-14T14:20:04+09:00">
    <meta itemprop="wordCount" content="708">
    <title>Analysis example :: CRIB artemis</title>
    <link href="https://okawak.github.io/artemis_crib/example/offline_analysis/analysis_example/index.html" rel="canonical" type="text/html" title="Analysis example :: CRIB artemis">
    <link href="/artemis_crib/example/offline_analysis/analysis_example/index.xml" rel="alternate" type="application/rss+xml" title="Analysis example :: CRIB artemis"><link rel="icon" href="/artemis_crib/images/crib_overlay.png" type="image/png">

    <link href="/artemis_crib/css/fontawesome-all.min.css?1723642918" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fontawesome-all.min.css?1723642918" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/nucleus.css?1723642918" rel="stylesheet">
    <link href="/artemis_crib/css/auto-complete.css?1723642918" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/auto-complete.css?1723642918" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/perfect-scrollbar.min.css?1723642918" rel="stylesheet">
    <link href="/artemis_crib/css/fonts.css?1723642918" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fonts.css?1723642918" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/theme.css?1723642918" rel="stylesheet">
    <link href="/artemis_crib/css/theme-CRIB-theme.css?1723642918" rel="stylesheet" id="R-variant-style">
    <link href="/artemis_crib/css/chroma-relearn-dark.css?1723642918" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/artemis_crib/css/variant.css?1723642918" rel="stylesheet">
    <link href="/artemis_crib/css/print.css?1723642918" rel="stylesheet" media="print">
    <link href="/artemis_crib/css/format-print.css?1723642918" rel="stylesheet">
    <script src="/artemis_crib/js/variant.js?1723642918"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/okawak.github.io\/artemis_crib';
      window.index_js_url="/artemis_crib/index.search.js?1723642918";
      // variant stuff
      window.variants && variants.init( [ 'CRIB-theme', 'zen-dark', 'learn', 'relearn-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
 

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-MZF67K577Y"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-MZF67K577Y");
</script>
 

  </head>
  <body class="mobile-support print" data-url="/artemis_crib/example/offline_analysis/analysis_example/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/example/index.html"><span itemprop="name">Example</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/example/offline_analysis/index.html"><span itemprop="name">Offline analysis</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Analysis example</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/example/offline_analysis/pyroot/index.html" title="pyROOT (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/example/simulation/index.html" title="MC Simulation (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="analysis-example">Analysis example</h1>

<span class="badge cstyle default"><span class="badge-content">last modified: 2024-08-14 by Kodai Okawa</span></span>
<p>A brief example of an analysis flow using artemis_crib is given below.
This is just the method recommended by okawak,
so you can proceed with the analysis as you like.</p>
<p>I hope this page will give you some ideas.</p>
<hr>
<ol start="0">
<li>Get calibration paramters</li>
<li>Concentrate on one RUN (one or two hours data) for analysis.</li>
<li>Briefly check other RUNs to see if the trend is the same.</li>
<li>Determine the appropriate gate (like remove noise, not precisely).</li>
<li>Create ROOT files for all RUNs with appropriate Gate.</li>
<li>Merging the ROOT files to one file.</li>
<li>Determine further detailed gates (essensial gate like selecting proton).</li>
<li>Create a ROOT file with only selected events from the original ROOT file.</li>
<li>Repeat steps 6 and 7.</li>
<li>Create a histogram that gives the physical quantity you want.</li>
<li>If necessary, create a simulation and produce a histogram you want.</li>
<li>Manipulate the histograms using macros (.C file) or pyROOT to produce the final result.</li>
</ol>
<hr>
<h5 id="1-concentrate-on-one-run-one-or-two-hours-data-for-analysis"><strong>1. Concentrate on one RUN (one or two hours data) for analysis</strong></h5>
<p>The acquired data contains a lot of noise and other data that is not absolutely necessary for analysis,
and if you use <code>artemis</code> to do an event loop for all events, it will take a long time.
Therefore, a root file should only be created for a specific RUN (data file) to save time.
(It is tempting to look at the data using with a lot of statistics,
but we believe that this is done by online-analysis and concentrate on reducing useless data.)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ artlogin <span class="o">(</span>user<span class="o">)</span>
</span></span><span class="line"><span class="cl">$ a
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">artemis <span class="o">[]</span> a steering/hoge.yaml <span class="nv">NAME</span><span class="o">=</span>run <span class="nv">NUM</span><span class="o">=</span><span class="m">0000</span>
</span></span><span class="line"><span class="cl">artemis <span class="o">[]</span> .q</span></span></code></pre></div><p>As you want to look at a variety of data I think,
it is convenient to create a canvas each time with â€˜tree-&gt;Draw()â€™, instead of defining a histogram.
Not defining a histogram also has the advantage that the event loop is faster.</p>
<p>Once the root file has been created, it can be read directly from that file, eliminating the waiting time.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ a output/created_rootfile_path.root
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">artemis <span class="o">[]</span> tree-&gt;Draw<span class="o">(</span><span class="s2">&#34;hoge&#34;</span><span class="o">)</span></span></span></code></pre></div><p><!-- raw HTML omitted -->It is good idea to make a &ldquo;.C&rdquo; macro file to record and reproduce the analysis process.<!-- raw HTML omitted --></p>
<p>Here are some points I think would be good to check:</p>
<ul>
<li>reproduce the online-analysis</li>
<li>check if the calibration parameter is correct</li>
<li>check multiplicity of the beam tracking detector (PPAC or MWDC)</li>
<li>proper timing of PPACa/b or MWDCa/b (because we may be using multihit TDC, V1190)</li>
<li>check the beam properties difference between &ldquo;beam_single&rdquo; trigger and &ldquo;SSD_coin&rdquo; trigger</li>
<li>RF timing with &ldquo;beam_single&rdquo; and &ldquo;SSD_coin&rdquo; trigger should be different, so need to check the offset value.</li>
<li>check RF timing and contamination of the beam with &ldquo;beam_single&rdquo; trigger</li>
</ul>
<p>If there are problems during the experiment, there may be many other things to check.</p>
<h5 id="2-briefly-check-other-runs-to-see-if-the-trend-is-the-same"><strong>2. Briefly check other RUNs to see if the trend is the same</strong></h5>
<p>It is possible that some parameter is different for each RUN.
There are many possibilities, for example, a trouble may have occurred and the conditions of the detector have changed.
In such cases, it is necessary to take action, for example, to prepare several calibration parameters.</p>
<p>While some of these changes in parameters can be predicted in advance, unforeseen changes can also occur.</p>
<ul>
<li>RF timing sometime change (relatie value)
<ul>
<li>-&gt; need to modify the PID parameters</li>
</ul>
</li>
<li>MUX position parameter sometimes shift
<ul>
<li>-&gt; need to modify position calibration parameter</li>
</ul>
</li>
</ul>
<p>These are the problems I have encountered, but others with different tendencies may exist.</p>
<p>If you can anticipate it, it is good to have a plan for dealing with it at this point and move on to the next step.
However, there is no need to waste time here as it can be noticed after merging the overall measurements in the following step.</p>
<h5 id="3-determine-the-appropriate-gate-like-remove-noise-not-precisely">3. Determine the appropriate gate (like remove noise, not precisely)</h5>
<h5 id="4-create-root-files-for-all-runs-with-appropriate-gate">4. Create ROOT files for all RUNs with appropriate Gate</h5>
<h5 id="5-merging-the-root-files-to-one-file">5. Merging the ROOT files to one file</h5>
<h5 id="6-determine-further-detailed-gates-essensial-gate-like-selecting-proton">6. Determine further detailed gates (essensial gate like selecting proton)</h5>
<h5 id="7-create-a-root-file-with-only-selected-events-from-the-original-root-file">7. Create a ROOT file with only selected events from the original ROOT file</h5>
<h5 id="8-repeat-steps-6-and-7">8. Repeat steps 6 and 7</h5>
<h5 id="9-create-a-histogram-that-gives-the-physical-quantity-you-want">9. Create a histogram that gives the physical quantity you want</h5>
<h5 id="10-if-necessary-create-a-simulation-and-produce-a-histogram-you-want">10. If necessary, create a simulation and produce a histogram you want</h5>
<h5 id="11-manipulate-the-histograms-using-macros-c-file-or-pyroot-to-produce-the-final-result">11. Manipulate the histograms using macros (.C file) or pyROOT to produce the final result</h5>

            <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:kodak2022@outlook.jp">okawak</a>
              <i class='fa-fw fas fa-calendar'></i> Aug 14, 2024
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="/artemis_crib/js/clipboard.min.js?1723642918" defer></script>
    <script src="/artemis_crib/js/perfect-scrollbar.min.js?1723642918" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/artemis_crib/js/theme.js?1723642918" defer></script>
  </body>
</html>
