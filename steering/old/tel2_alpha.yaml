Anchor:

  # @NAME@ = phys or bg
 - &input output/coin/tel2/merge/tel2_@NAME@.root
 - &output output/alpha/tel2/tel2_@NAME@.root

Processor:
  - name: timer
    type: art::TTimerProcessor

  - name: root_eventstore
    type: art::TTreeEventStore
    parameter:
      OutputTransparency: 1
      FileName: *input
      TreeName: tree

  - name: proc_copy_processor
    type: art::TTreeCopyProcessor
    parameter:
      InputCollection:     tel2
      OutputCollection:    tel

  - name: proc_prepTGTIK_processor
    type: art::TTGTIKPrepProcessor
    parameter:
      InputCollection_a:     f3appac
      InputCollection_b:     f3bppac
      InputCollection_tel:   tel2
      OutputCollection: alpha
      WindowPosition: 677.0


  - name: proc_gateinit
    type: art::TGateArrayInitializer
    parameter:
      OutputTransparency: 1

  - name: proc_gate
    type: art::TTreeFormulaGateProcessor
    parameter:
      Definitions:
        - "tel_ene; abs(sqrt(tel.fdEX * tel.fEtotal)-0.060*tel.fdEY - 4.25) < 0.75"
        - "tel_timing; abs(tel.fdEXTiming - 240.0) < 40.0 && abs(tel.fdEYTiming - 250.0) < 150.0"
        - "detx; abs(alpha.fDetx - 60.0) < 60.0"
        - "dety; abs(alpha.fDety - 0.0) < 60.0"
        - "detz; abs(alpha.fDetz - 460.0) < 20.0"
      OutputTransparency: 1
      Verbose: 1

  - name: tel_ene_gate
    type: art::TGateStopProcessor
    parameter:
      GateName: tel_ene
      OutputTransparency: 1
      StopIf: 0
      Verbose: 1

  - name: tel_timing_gate
    type: art::TGateStopProcessor
    parameter:
      GateName: tel_timing
      OutputTransparency: 1
      StopIf: 0
      Verbose: 1
   
  - name: detx_gate
    type: art::TGateStopProcessor
    parameter:
      GateName: detx
      OutputTransparency: 1
      StopIf: 0

  - name: dety_gate
    type: art::TGateStopProcessor
    parameter:
      GateName: dety
      OutputTransparency: 1
      StopIf: 0

  - name: detz_gate
    type: art::TGateStopProcessor
    parameter:
      GateName: detz
      OutputTransparency: 1
      StopIf: 0



  - name: outputtree
    type: art::TOutputTreeProcessor
    parameter:
      FileName:
        - *output
