Anchor:

 - &input output/track/si26_phys.root
 - &output output/simulation/ES/ES2_phys.root

Processor:
  - name: timer
    type: art::TTimerProcessor


  - name: counter
    type: art::TCounterEventStore
    parameter:
      #MaxLoop: 3131788000
      MaxLoop: 60000000
      OutputTransparency: 0

  - name: proc_simulation_generator
    type: art::TSimTreeRandomBeamGenerator
    parameter:
      OutputCollection: beam
      FileName: *input
      TreeName: tree
      BeamBranchName: f3ppac

  - name: proc_elastic_simulation
    type: art::TSimESProcessor2
    parameter:
      InputCollection:  beam
      OutputCollection: result
      WindowZpos: 347.5
      WindowThickness: 0.004


  - name: proc_gateinit
    type: art::TGateArrayInitializer
    parameter:
      OutputTransparency: 1

  - name: proc_gate
    type: art::TTreeFormulaGateProcessor
    parameter:
      Definitions:
        - "have_data; result@.GetEntriesFast() > 0"
      OutputTransparency: 1
      Verbose: 1

  - name: have_data_gate
    type: art::TGateStopProcessor
    parameter:
      GateName: have_data
      OutputTransparency: 1
      StopIf: 0
      Verbose: 1



  - name: outputtree
    type: art::TOutputTreeProcessor
    parameter:
      FileName:
        - *output
