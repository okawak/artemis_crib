<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.132.1">
    <meta name="generator" content="Relearn 6.1.1">
    <meta name="description" content="last modified: 2024-01-20 by Kodai Okawa Warning still under consideration in this part!">
    <meta name="author" content="Kodai Okawa">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="User config :: CRIB artemis">
    <meta name="twitter:description" content="last modified: 2024-01-20 by Kodai Okawa Warning still under consideration in this part!">
    <meta property="og:url" content="https://okawak.github.io/artemis_crib/crib_parts/userconfig/index.html">
    <meta property="og:site_name" content="CRIB artemis">
    <meta property="og:title" content="User config :: CRIB artemis">
    <meta property="og:description" content="last modified: 2024-01-20 by Kodai Okawa Warning still under consideration in this part!">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="CRIB Configuration">
    <meta property="article:published_time" content="2023-12-12T13:43:31+09:00">
    <meta property="article:modified_time" content="2024-01-20T18:31:28+09:00">
    <meta property="article:tag" content="CRIB">
    <meta itemprop="name" content="User config :: CRIB artemis">
    <meta itemprop="description" content="last modified: 2024-01-20 by Kodai Okawa Warning still under consideration in this part!">
    <meta itemprop="datePublished" content="2023-12-12T13:43:31+09:00">
    <meta itemprop="dateModified" content="2024-01-20T18:31:28+09:00">
    <meta itemprop="wordCount" content="352">
    <meta itemprop="keywords" content="CRIB">
    <title>User config :: CRIB artemis</title>
    <link href="https://okawak.github.io/artemis_crib/crib_parts/userconfig/index.html" rel="canonical" type="text/html" title="User config :: CRIB artemis">
    <link href="/artemis_crib/crib_parts/userconfig/index.xml" rel="alternate" type="application/rss+xml" title="User config :: CRIB artemis"><link rel="icon" href="/artemis_crib/images/crib_overlay.png" type="image/png">

    <link href="/artemis_crib/css/fontawesome-all.min.css?1723733518" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fontawesome-all.min.css?1723733518" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/nucleus.css?1723733518" rel="stylesheet">
    <link href="/artemis_crib/css/auto-complete.css?1723733518" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/auto-complete.css?1723733518" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/perfect-scrollbar.min.css?1723733518" rel="stylesheet">
    <link href="/artemis_crib/css/fonts.css?1723733518" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/artemis_crib/css/fonts.css?1723733518" rel="stylesheet"></noscript>
    <link href="/artemis_crib/css/theme.css?1723733518" rel="stylesheet">
    <link href="/artemis_crib/css/theme-CRIB-theme.css?1723733518" rel="stylesheet" id="R-variant-style">
    <link href="/artemis_crib/css/chroma-relearn-dark.css?1723733518" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/artemis_crib/css/variant.css?1723733518" rel="stylesheet">
    <link href="/artemis_crib/css/print.css?1723733518" rel="stylesheet" media="print">
    <link href="/artemis_crib/css/format-print.css?1723733518" rel="stylesheet">
    <script src="/artemis_crib/js/variant.js?1723733518"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/okawak.github.io\/artemis_crib';
      window.index_js_url="/artemis_crib/index.search.js?1723733518";
      // variant stuff
      window.variants && variants.init( [ 'CRIB-theme', 'zen-dark', 'learn', 'relearn-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
 

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-MZF67K577Y"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-MZF67K577Y");
</script>
 

  </head>
  <body class="mobile-support print" data-url="/artemis_crib/crib_parts/userconfig/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/artemis_crib/crib_parts/index.html"><span itemprop="name">CRIB Configuration</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">User config</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/crib_parts/onlinemode/index.html" title="Online-mode analysis (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/artemis_crib/crib_parts/newcommand/index.html" title="New commands (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="/artemis_crib/tags/crib/index.html">CRIB</a></li>
  </ul>
</div>
            </header>

<h1 id="user-config">User config</h1>

<span class="badge cstyle default"><span class="badge-content">last modified: 2024-01-20 by Kodai Okawa</span></span>

<div class="box notices cstyle warning">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div>
  <div class="box-content">

<p>still under consideration in this part!</p>
</div>
</div>
<p>CRIB often wants to customise artemis because it originally used ANAPAW and wants to perform analysis like ANAPAW.
However, we do not want to make too many changes to the source code of artemis itself, and we want to make it work in the user-defined part. (it means in the <strong>artemis work directory</strong>)</p>
<p>In particular, it is often the case that we want to create a new artemis command, but writing the command source on the work directory and registering it in <code>artemislogon.C</code> did not work somehow&hellip;</p>
<p>Also, artemislogon.C is automatically generated (from .artemislogon.C.in) by the cmake functionality, and even if this itself is changed, it will revert when cmake is redone.</p>
<p>Therefore, a file called <code>userlogon.C</code> was prepared, which only took out the user-defined part from artemislogon.C.
The following files have been modified to read this.</p>

<div class="tab-panel" data-tab-group="06ca78d9116e10e362ea07f893cc51ac">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="artemissourcesmaintartrintcc"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('06ca78d9116e10e362ea07f893cc51ac','artemissourcesmaintartrintcc')"
    >
      <span class="tab-nav-text">artemis/sources/main/TArtRint.cc</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="artemissourcesmaintartrintcc"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="ln">14</span><span class="cl"> #include &lt;TInterpreter.h&gt;
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="gi">+#include &lt;TSystem.h&gt;
</span></span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="gi"></span> #include &#34;TLoopManager.h&#34;
</span></span></code></pre></div></div>
    </div>
  </div>
</div>
<div class="tab-panel" data-tab-group="68d9a15f948f5126a3808138a6259991">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="artemissourcesmaintartrintcc"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('68d9a15f948f5126a3808138a6259991','artemissourcesmaintartrintcc')"
    >
      <span class="tab-nav-text">artemis/sources/main/TArtRint.cc</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="artemissourcesmaintartrintcc"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-diff" data-lang="diff"><span class="line"><span class="ln">44</span><span class="cl">    TRint::ProcessLine(&#34;.x artemislogon.C&#34;);
</span></span><span class="line"><span class="ln">45</span><span class="cl"><span class="gi">+   FileStat_t info;
</span></span></span><span class="line"><span class="ln">46</span><span class="cl"><span class="gi">+   if (gSystem-&gt;GetPathInfo(&#34;userlogon.C&#34;, info)==0) {
</span></span></span><span class="line"><span class="ln">47</span><span class="cl"><span class="gi">+      TRint::ProcessLine(&#34;.x userlogon.C&#34;);
</span></span></span><span class="line"><span class="ln">48</span><span class="cl"><span class="gi">+   }
</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>If there is a <code>userlogon.C</code> file in the work directory, it is loaded, otherwise artemis can be used as usual.</p>
<h3 id="userlogonc">userlogon.C</h3>
<p>This file can be used freely!
What we wanted to do most is to register user-defined commands, which can be done as follows.</p>

<div class="tab-panel" data-tab-group="2d12929ade7a576a866b98240f325f47">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="userlogonc"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('2d12929ade7a576a866b98240f325f47','userlogonc')"
    >
      <span class="tab-nav-text">userlogon.C</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="userlogonc"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="c1">// load user function
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">gROOT</span><span class="o">-&gt;</span><span class="n">ProcessLine</span><span class="p">(</span><span class="s">&#34;.L macro/UserUtil.C&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">// User commands register
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="c1">// cf definition: TCatCmdFactory *cf = TCatCmdFactory::Instance();
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="n">TCatCmdLoopStart</span><span class="o">::</span><span class="n">Instance</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="n">TCatCmdLoopStop</span><span class="o">::</span><span class="n">Instance</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TCmdXfitg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TCmdXstatus</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TCmdXYblow</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TCmdXblow</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="n">TCatCmdTCutG</span><span class="o">::</span><span class="n">Instance</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TCmdErase</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="n">cf</span><span class="o">-&gt;</span><span class="n">Register</span><span class="p">(</span><span class="k">new</span> <span class="n">art</span><span class="o">::</span><span class="n">TCmdDraw</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="c1">// TTree merge setting
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">TTree</span><span class="o">::</span><span class="n">SetMaxTreeSize</span><span class="p">(</span> <span class="mi">1000000000000LL</span> <span class="p">);</span> <span class="c1">// 1TB
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div></div>
    </div>
  </div>
</div><p>The first line <code>gROOT-&gt;ProcessLine(&quot;.L macro/UserUtil.C&quot;)</code> load the user definition function.
You can add any function to the &ldquo;macro/UserUtil.C&rdquo; file, and the function to load TCutG object in &ldquo;/gate/*.root&rdquo; directory is written defaultly.
For more detail, please see <a href="/artemis_crib/crib_parts/newcommand/index.html">tcutg command</a> and <a href="/artemis_crib/example/online_analysis/gate/index.html">gate</a> pages.</p>
<p>(For some reason, an error occurred when writing in artemislogon.C.)
You can also customise it in other ways to make it easier for you. For example, when creating a TTree, a setting to increase the file size limit is also included by default.</p>

            <footer class="footline">
              <i class='fa-fw fas fa-user'></i> <a href="mailto:kodak2022@outlook.jp">okawak</a>
              <i class='fa-fw fas fa-calendar'></i> Jan 20, 2024
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="/artemis_crib/js/clipboard.min.js?1723733518" defer></script>
    <script src="/artemis_crib/js/perfect-scrollbar.min.js?1723733518" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/artemis_crib/js/theme.js?1723733518" defer></script>
  </body>
</html>
